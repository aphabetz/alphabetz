<!-- Popup Overlay -->
<div class="popup-overlay" id="popup-overlay">
  <div class="popup-banner">
      <button class="popup-close-btn hover1" id="popup-close-btn">&times;</button>

      <!-- Desktop Swiper -->
      <div class="popup-desktop-banner">
          <div class="swiper-container popup-desktop-swiper">
              <div class="swiper-wrapper">
                  <% popupbanners.forEach((slide, index) => { %>
                      <div class="swiper-slide popup-slide">
                          <img src="<%= process.env.S3_BASE_URL + slide.bannerImage.webView %>" alt="<%= slide.title %>"/>
                      </div>
                  <% }) %>
              </div>
              <div class="swiper-pagination popup-pagination"></div>
          </div>
      </div>

      <!-- Mobile Swiper -->
      <div class="popup-mobile-banner">
          <div class="swiper-container popup-mobile-swiper">
              <div class="swiper-wrapper">
                  <% popupbanners.forEach((slide, index) => { %>
                      <div class="swiper-slide popup-slide">
                          <img src="<%= process.env.S3_BASE_URL + slide.bannerImage.mobileView %>" alt="<%= slide.title %>"/>
                      </div>
                  <% }) %>
              </div>
              <div class="swiper-pagination popup-pagination"></div>
          </div>
      </div>
  </div>
</div>

<!-- Styles -->
<style>
  .popup-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.01s ease-in-out, visibility 0.01s;
  }

  .popup-banner {
      position: relative;
      width: auto;
      max-width: 90%;
      height: 600px;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
  }

  .popup-close-btn {
      position: absolute;
      top: -25px;
      right: 15px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      height: 40px;
      width: 40px;
      font-size: 30px;
      cursor: pointer;
      padding: 0px;
      border-radius: 50%;
      z-index: 1000;
  }

  .popup-slide {
      display: flex;
      justify-content: center;
      align-items: center;
  }

  .popup-slide img {
      height: 600px;
      width: auto;
      max-width: 100%;
      object-fit: contain;
      display: block;
  }
  @media (max-width: 1200px) {
    .popup-slide img {
      height: 500px;
      width: auto;
      max-width: 100%;
      object-fit: contain;
      display: block;
  }
  }
  @media (max-width: 1000px) {
    .popup-slide img {
      height: 400px;
      width: auto;
      max-width: 100%;
      object-fit: contain;
      display: block;
  }
  }
  @media (max-width: 768px) {
    .popup-desktop-swiper{
      display:none;
    }
    .popup-mobile-swiper{
      display:block;
    }
      .popup-banner {
          max-width: 95%;
      }
      .popup-close-btn {
        top: 12px;
      }
      .popup-slide img {
          height: 100%;
          max-height: 500px;
          width: 100%;
          max-width: 90%;
      }
  }
</style>

<!-- Scripts -->
<script>
  document.addEventListener("DOMContentLoaded", function () {
    function initializeSwiper(selector) {
      let swiperInstance = new Swiper(selector, {
          slidesPerView: 1,
          loop: true,
          autoplay: {
              delay: 3000,
              disableOnInteraction: false, // Keeps autoplay running
          },
          navigation: {
              nextEl: ".popup-next",
              prevEl: ".popup-prev",
          },
          pagination: {
              el: ".popup-pagination",
              clickable: true,
          },
          speed: 100, // Smooth transition speed
          observer: true,
          observeParents: true,
          on: {
              init: function () {
                  this.el.style.opacity = "1"; // Ensure visibility from start
                  this.el.style.visibility = "visible";
                  this.loopFix();
                  this.autoplay.start();
              },
              slideChangeTransitionStart: function () {
                  document.querySelectorAll(`${selector} .swiper-slide`).forEach((slide) => {
                      slide.style.transition = "transform 0.1s ease-out"; // Smoothens slide transition
                      slide.style.visibility = "visible"; // Prevents blinking
                      slide.style.opacity = "1"; // Keeps slides visible
                  });
              },
              slideChangeTransitionEnd: function () {
                  this.loopFix(); // Fixes loop glitches
                  this.el.style.opacity = "1"; // Ensures slides don’t disappear
                  this.el.style.visibility = "visible";
                  this.autoplay.start();
              },
              touchEnd: function () {
                  this.autoplay.start(); // Keeps autoplay running even after manual swipe
              }
          }
      });
  
      setTimeout(() => {
          swiperInstance.update();
          swiperInstance.loopFix();
          swiperInstance.el.style.opacity = "1";
          swiperInstance.el.style.visibility = "visible";
          swiperInstance.autoplay.start();
      }, 1000);
  
      return swiperInstance;
  }
  

      var popupDesktopSwiper = initializeSwiper(".popup-desktop-swiper");
      var popupMobileSwiper = initializeSwiper(".popup-mobile-swiper");

      // Open Popup
      document.getElementById("popup-overlay").style.visibility = "visible";
      document.getElementById("popup-overlay").style.opacity = "1";

      // Close Popup
      document.getElementById("popup-close-btn").addEventListener("click", function () {
          document.getElementById("popup-overlay").style.opacity = "0";
          setTimeout(() => {
              document.getElementById("popup-overlay").style.visibility = "hidden";
          }, 300);
      });

      // Close popup when clicking outside the banner
      document.getElementById("popup-overlay").addEventListener("click", function (e) {
          if (e.target === this) {
              document.getElementById("popup-overlay").style.opacity = "0";
              setTimeout(() => {
                  document.getElementById("popup-overlay").style.visibility = "hidden";
              }, 300);
          }
      });
  });
</script>



<!--    
      
    <% banners.forEach(slide => { %>
         -->
<!-- <% }) %> -->
<section class="Hero">
  <div class="container homebannercontainer">
    <div
      class="d-flex justify-content-center align-items-center text-center flex-column"
      data-aos="fade-up"
    >
      <h1 style="font-weight: 700 !important">
        Welcome to Alphabetz Preschool Dongargarh
      </h1>
      <p>
        Nurturing creativity, life skills, and playful learning in a supportive
        environment, guided by dedicated teachers for your child’s growth and
        development.
      </p>
      <div>
        <a href="/admission" class="hovering">Get In Touch</a>
      </div>
    </div>
    <div
      class="d-flex align-items-center justify-content-center gap-lg-5 pt-lg-5 position-relative flex-md-row flex-column"
    >
      <figure class="mobilenone">
        <img
          class="position-absolute rotate-animation"
          src="assets/images/index/plane.webp"
          alt="plane"
        />
      </figure>
      <div class="mobilenone">
        <div class="p-0"></div>
        <figure>
          <img
            class="position-absolute bounce-animation w-10"
            src="assets/images/index/pencils.webp"
            alt="pencils"
          />
        </figure>
      </div>
      <div class="d-flex flex-column gap-0 mobilenone">
        <div class="d-flex flex-column align-items-center gap-2">
          <h2><span class="number" data-final-value="7.5"></span>Learn</h2>
          <p>Smart Methods, Easy Learning</p>
        </div>
        <hr />
        <div class="d-flex flex-column align-items-center gap-2">
          <h2><span class="number" data-final-value="50"></span>Fun</h2>
          <p>
            Where play and education <br />
            go hand in hand.
          </p>
        </div>
      </div>
      <div
        class="d-flex align-items-md-end justify-content-center gap-lg-3 gap-md-2 gap-3 position-relative flex-md-row flex-column mt-md-0 "
      >
        <figure class="m-0" style="max-width: 484px" data-aos="zoom-in-up">
          <img
            class="img-1"
            src="/assets/images/commits/AlphabetzPreschoolMascotaward.webp"
            alt="HeroImg"
          />
        </figure>
        <div class="position-relative mobilenone" data-aos="zoom-in-up">
          <figure class="img-2">
            <img
              class="rounded-circle w-100"
              src="assets/images/index/Hero_img2.webp"
              alt="HeroImg2"
            />
          </figure>
        </div>
        <div class="mobilenone">
          <div class="p-0 z-1"></div>
          <figure>
            <img
              class="position-absolute bounce-slow"
              src="assets/images/index/bulb.webp"
              alt="bulb"
            />
          </figure>
        </div>
        <figure class="mobilenone">
          <img
            class="position-absolute rotate-animation"
            src="assets/images/index/baloon.webp"
            alt="Baloon"
          />
        </figure>
      </div>
    </div>
  </div>
</section>
